"use strict";(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[488],{1488:(H,u,l)=>{l.r(u),l.d(u,{BooksModule:()=>$});var i=l(6895),r=l(2791),O=l(9646),A=l(262),o=l(8256),g=l(458);let B=(()=>{class _{constructor(){this.smallActive=!0}get elementClasses(){return{"px-10":this.smallActive,"pt-10":this.smallActive,"pb-10":this.smallActive}}smallOn(){this.smallActive=!1}smallOff(){this.smallActive=!0}}return _.\u0275fac=function(n){return new(n||_)},_.\u0275dir=o.lG2({type:_,selectors:[["","bmZoom",""]],hostVars:2,hostBindings:function(n,e){1&n&&o.NdJ("mouseenter",function(){return e.smallOn()})("mouseleave",function(){return e.smallOff()}),2&n&&o.Tol(e.elementClasses)}}),_})(),d=(()=>{class _{transform(n,...e){if(n)return n.slice(0,3)+"-"+n.slice(3)}}return _.\u0275fac=function(n){return new(n||_)},_.\u0275pipe=o.Yjl({name:"isbn",type:_,pure:!0}),_})();function f(_,t){1&_&&(o.TgZ(0,"span"),o._uU(1,", "),o.qZA())}function k(_,t){if(1&_&&(o.TgZ(0,"div",8),o._uU(1),o.YNc(2,f,2,0,"span",9),o.qZA()),2&_){const n=t.$implicit,e=t.last;o.xp6(1),o.hij(" ",n,""),o.xp6(1),o.Q6J("ngIf",!e)}}const T=function(_){return["/books/detail",_]};let N=(()=>{class _{constructor(){}}return _.\u0275fac=function(n){return new(n||_)},_.\u0275cmp=o.Xpm({type:_,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:17,vars:11,consts:[[1,"container","py-4"],[1,"card","md:card-side","bg-base-100","shadow-xl"],["bmZoom","",1,"h-full","w-20","lg:object-cover","md:h-full","md:w-48","sm:h-full","sm:w-24",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"text-lg"],["class","text-xs",4,"ngFor","ngForOf"],[1,"btn","btn-primary","basis-1/4","m-2",3,"routerLink"],[1,"text-xs"],[4,"ngIf"]],template:function(n,e){1&n&&(o.TgZ(0,"div",0)(1,"div",1)(2,"figure"),o._UZ(3,"img",2),o.qZA(),o.TgZ(4,"div",3)(5,"h2",4),o._uU(6),o.qZA(),o.TgZ(7,"div",5),o._uU(8),o.qZA(),o.TgZ(9,"div"),o.YNc(10,k,3,2,"div",6),o._UZ(11,"br"),o.TgZ(12,"span"),o._uU(13),o.ALo(14,"isbn"),o.qZA(),o.TgZ(15,"button",7),o._uU(16," Details "),o.qZA()()()()()),2&n&&(o.xp6(3),o.s9C("src",null==e.book||null==e.book.thumbnails||null==e.book.thumbnails[0]?null:e.book.thumbnails[0].url,o.LSH),o.s9C("alt",null==e.book||null==e.book.thumbnails||null==e.book.thumbnails[0]?null:e.book.thumbnails[0].title),o.xp6(3),o.Oqu(null==e.book?null:e.book.title),o.xp6(2),o.Oqu(null==e.book?null:e.book.subtitle),o.xp6(2),o.Q6J("ngForOf",null==e.book?null:e.book.authors),o.xp6(3),o.hij("ISBN: ",o.lcZ(14,7,null==e.book?null:e.book.isbn)," "),o.xp6(2),o.Q6J("routerLink",o.VKq(9,T,null==e.book?null:e.book.isbn)))},dependencies:[i.sg,i.O5,r.rH,B,d]}),_})();function E(_,t){if(1&_&&(o.ynx(0),o.TgZ(1,"div",3)(2,"div"),o.O4$(),o.TgZ(3,"svg",4),o._UZ(4,"path",5),o.qZA(),o.kcU(),o.TgZ(5,"span"),o._uU(6),o.ALo(7,"json"),o.qZA()()(),o.BQk()),2&_){const n=o.oxw();o.xp6(6),o.hij(" ",o.lcZ(7,1,n.error)," ")}}const S=function(_){return["/books/detail",_]};function C(_,t){if(1&_&&o._UZ(0,"bm-book-list-item",8),2&_){const n=t.$implicit;o.Q6J("book",n)("routerLink",o.VKq(2,S,n.isbn))}}function h(_,t){if(1&_&&(o.ynx(0),o.YNc(1,C,1,4,"bm-book-list-item",7),o.BQk()),2&_){const n=t.ngIf;o.xp6(1),o.Q6J("ngForOf",n)}}function D(_,t){if(1&_&&(o.ynx(0),o.YNc(1,h,2,1,"ng-container",6),o.ALo(2,"async"),o.BQk()),2&_){const n=o.oxw(),e=o.MAs(4);o.xp6(1),o.Q6J("ngIf",o.lcZ(2,2,n.books$))("ngIfElse",e)}}function L(_,t){1&_&&(o.TgZ(0,"div",9)(1,"div",10),o._uU(2," Loading... "),o.TgZ(3,"div",11),o._UZ(4,"div",12),o.qZA()()())}let v=(()=>{class _{constructor(n,e){this.bs=n,this.cd=e}ngOnInit(){this.books$=this.bs.getAll().pipe((0,A.K)(n=>(this.error=n,this.cd.detectChanges(),(0,O.of)(null)))),this.listView=!0}}return _.\u0275fac=function(n){return new(n||_)(o.Y36(g.T),o.Y36(o.sBO))},_.\u0275cmp=o.Xpm({type:_,selectors:[["bm-book-list"]],decls:5,vars:2,consts:[[1,"container","px-8","py-8"],[4,"ngIf"],["loading",""],[1,"alert","alert-error","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","flex-shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[4,"ngIf","ngIfElse"],["class","item",3,"book","routerLink",4,"ngFor","ngForOf"],[1,"item",3,"book","routerLink"],[1,"relative","rounded-xl","overflow-auto","p-8"],[1,"flex","items-center","justify-center"],[1,"pl-5"],[1,"w-6","h-6","border-b-2","border-slate-900","rounded-full","animate-spin"]],template:function(n,e){1&n&&(o.TgZ(0,"div",0),o.YNc(1,E,8,3,"ng-container",1),o.YNc(2,D,3,4,"ng-container",1),o.YNc(3,L,5,0,"ng-template",null,2,o.W1O),o.qZA()),2&n&&(o.xp6(1),o.Q6J("ngIf",e.error),o.xp6(1),o.Q6J("ngIf",!e.error))},dependencies:[i.sg,i.O5,r.rH,N,i.Ov,i.Ts]}),_})();var c=l(3530);let I=(()=>{class _{constructor(){this.visibility="hidden"}ngOnChanges(n){const{bmDelay:e}=n;setTimeout(()=>{this.visibility="visible"},e.currentValue)}}return _.\u0275fac=function(n){return new(n||_)},_.\u0275dir=o.lG2({type:_,selectors:[["","bmDelay",""]],hostVars:2,hostBindings:function(n,e){2&n&&o.Udp("visibility",e.visibility)},inputs:{bmDelay:"bmDelay"},features:[o.TTD]}),_})();function Z(_,t){1&_&&(o.ynx(0),o.TgZ(1,"div",2)(2,"div",3),o._uU(3," Loading... "),o.TgZ(4,"div",4),o._UZ(5,"div",5),o.qZA()()(),o.BQk())}function M(_,t){if(1&_&&(o.ynx(0),o.TgZ(1,"div",6)(2,"div"),o.O4$(),o.TgZ(3,"svg",7),o._UZ(4,"path",8),o.qZA(),o.kcU(),o.TgZ(5,"span"),o._uU(6),o.ALo(7,"json"),o.qZA()()(),o.BQk()),2&_){const n=o.oxw();o.xp6(6),o.hij(" ",o.lcZ(7,1,n.error)," ")}}function x(_,t){if(1&_&&(o.ynx(0),o._uU(1),o._UZ(2,"br"),o.BQk()),2&_){const n=t.$implicit;o.xp6(1),o.hij(" ",n,"")}}function U(_,t){if(1&_&&(o.ynx(0),o._UZ(1,"star-solid-icon",34),o.BQk()),2&_){const n=t.index;o.xp6(1),o.Q6J("bmDelay",1e3+500*n)}}function R(_,t){if(1&_&&(o.ynx(0),o.TgZ(1,"div",33),o.YNc(2,U,2,1,"ng-container",16),o.qZA(),o.BQk()),2&_){const n=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",",".repeat(n.book.rating-1).split(","))}}function K(_,t){if(1&_&&(o.ynx(0),o.TgZ(1,"div",35)(2,"div"),o.O4$(),o.TgZ(3,"svg",7),o._UZ(4,"path",8),o.qZA(),o.kcU(),o.TgZ(5,"span"),o._uU(6),o.ALo(7,"json"),o.qZA()()(),o.BQk()),2&_){const n=o.oxw(2);o.xp6(6),o.hij(" ",o.lcZ(7,1,n.error)," ")}}const y=function(_){return["/admin/edit",_]};function P(_,t){if(1&_){const n=o.EpF();o.ynx(0),o.TgZ(1,"div",9)(2,"div",10),o._uU(3),o.qZA(),o.TgZ(4,"div",11),o._uU(5),o.qZA(),o._UZ(6,"div",12),o.TgZ(7,"div",13)(8,"div",14)(9,"div",11),o.SDv(10,15),o.qZA(),o.YNc(11,x,3,1,"ng-container",16),o.qZA(),o.TgZ(12,"div",17)(13,"div",11),o._uU(14,"ISBN:"),o.qZA(),o._uU(15),o.ALo(16,"isbn"),o.qZA(),o.TgZ(17,"div",18)(18,"div",19),o.SDv(19,20),o.qZA(),o._uU(20),o.ALo(21,"date"),o.qZA(),o.TgZ(22,"div",18)(23,"div",11),o.SDv(24,21),o.qZA(),o.YNc(25,R,3,1,"ng-container",1),o.qZA()(),o.TgZ(26,"div",22),o.SDv(27,23),o.qZA(),o.TgZ(28,"p"),o._uU(29),o.qZA(),o._UZ(30,"img",24)(31,"br")(32,"br"),o.YNc(33,K,8,3,"ng-container",1),o.TgZ(34,"div",25)(35,"button",26),o._uU(36," Edit "),o.qZA(),o.TgZ(37,"button",27),o.NdJ("click",function(){o.CHM(n);const s=o.oxw();return o.KtG(s.delete(s.book.isbn))}),o.SDv(38,28),o.qZA(),o.TgZ(39,"button",29),o.SDv(40,30),o.qZA(),o.TgZ(41,"button",31),o.SDv(42,32),o.qZA()()(),o.BQk()}if(2&_){const n=o.oxw();o.xp6(3),o.Oqu(n.book.title),o.xp6(2),o.Oqu(n.book.subtitle),o.xp6(6),o.Q6J("ngForOf",n.book.authors),o.xp6(4),o.hij(" ",o.lcZ(16,11,n.book.isbn)," "),o.xp6(5),o.hij(" ",o.xi3(21,13,n.book.published,"longDate")," "),o.xp6(5),o.Q6J("ngIf",n.book.rating),o.xp6(4),o.Oqu(n.book.description),o.xp6(1),o.s9C("src",null==n.book.thumbnails||null==n.book.thumbnails[0]?null:n.book.thumbnails[0].url,o.LSH),o.s9C("alt",null==n.book.thumbnails||null==n.book.thumbnails[0]?null:n.book.thumbnails[0].title),o.xp6(3),o.Q6J("ngIf",n.error),o.xp6(2),o.Q6J("routerLink",o.VKq(16,y,n.book.isbn))}}const w=[{path:"list",component:v},{path:"detail/:isbn",component:(()=>{class _{constructor(n,e,s){this.router=n,this.route=e,this.bookService=s,this.id=0,this.confirmMessage="Really delete book?"}ngOnInit(){this.route.paramMap.subscribe(n=>{let e;null!=(e=n.get("isbn"))?this.getABook(e):(console.error("no isbn param found in route, rerouting to /home (should actually route to an error page) "),this.router.navigate(["/home"]))})}getABook(n){this.bookService.getBook(n).subscribe({next:e=>{this.book=e},error:e=>this.error=e})}delete(n){this.confirm(this.confirmMessage).subscribe(e=>{e&&this.reallyDelete(n)})}reallyDelete(n){this.bookService.deleteBook(n).subscribe({next:()=>{this.router.navigate(["/books/list"])},error:e=>{this.error=e}})}confirm(n){const e=window.confirm(n);return(0,O.of)(e)}}return _.\u0275fac=function(n){return new(n||_)(o.Y36(r.F0),o.Y36(r.gz),o.Y36(g.T))},_.\u0275cmp=o.Xpm({type:_,selectors:[["bm-book-details"]],decls:4,vars:3,consts:function(){let t,n,e,s,p,b,m;return t=$localize`:@@Authors:Authors:`,n=$localize`:@@published: published: `,e=$localize`:@@rating:Rating:`,s=$localize`:@@bookDescription: Description: `,p=$localize`:@@deleteButton: Delete `,b=$localize`:@@backToBookListButton: back to book list `,m=$localize`:@@next: Next `,[[1,"container","px-8","py-8"],[4,"ngIf"],[1,"relative","rounded-xl","overflow-auto","p-8"],[1,"flex","items-center","justify-center"],[1,"pl-5"],[1,"w-6","h-6","border-b-2","border-slate-900","rounded-full","animate-spin"],["id","errorNoBook",1,"alert","alert-error","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","flex-shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"container"],[1,"text-2xl","font-bold","pb-8"],[1,"text-lg","font-bold"],[1,"divider"],[1,"flex","flex-row","flex-wrap","pb-8"],[1,"basis-1/5","pr-2","pb-2"],t,[4,"ngFor","ngForOf"],["id","isbn",1,"basis-1/4","pr-2","pb-2"],[1,"basis-1/4","pr-2","pb-2"],["id","published",1,"text-lg","font-bold"],n,e,[1,"text-lg","font-bold","pb-2"],s,[1,"h-full","w-48",3,"src","alt"],[1,"flex","flex-row"],["id","editButton",1,"btn","btn-primary","basis-1/4","m-2",3,"routerLink"],[1,"btn","btn-secondary","basis-1/4","m-2",3,"click"],p,["routerLink","/books/list",1,"btn","btn-secondary","basis-1/4","m-2"],b,[1,"btn","btn-secondary","basis-1/4","m-2"],m,[1,"flex","flex-wrap"],["color","goldenrod",3,"bmDelay"],["id","error",1,"alert","alert-error","shadow-lg"]]},template:function(n,e){1&n&&(o.TgZ(0,"div",0),o.YNc(1,Z,6,0,"ng-container",1),o.YNc(2,M,8,3,"ng-container",1),o.YNc(3,P,43,18,"ng-container",1),o.qZA()),2&n&&(o.xp6(1),o.Q6J("ngIf",!e.book&&!e.error),o.xp6(1),o.Q6J("ngIf",!e.book&&e.error),o.xp6(1),o.Q6J("ngIf",e.book))},dependencies:[i.sg,i.O5,r.rH,c.j0F,I,i.Ts,i.uU,d],styles:["p[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),_})()}];let G=(()=>{class _{}return _.\u0275fac=function(n){return new(n||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[r.Bz.forChild(w),r.Bz]}),_})(),$=(()=>{class _{}return _.\u0275fac=function(n){return new(n||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[i.ez,G,c.zwd,c.$Xq]}),_})()}}]);